(()=>{var e={};e.id=222,e.ids=[222],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8857:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>o});var r=a(9441),s=a(1498),l=a(6580),i=a.n(l),n=a(5511),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(t,c);let o=["",{children:["buyer",{children:["marketplace",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5925)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/buyer/marketplace/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7254)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/buyer/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,9656)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,3250,23)),"next/dist/client/components/not-found-error"]}],d=["/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/buyer/marketplace/page.tsx"],p="/buyer/marketplace/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/buyer/marketplace/page",pathname:"/buyer/marketplace",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3099:(e,t,a)=>{Promise.resolve().then(a.bind(a,1138))},1138:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(7685),s=a(3810),l=a(3045);let i=(0,a(5691).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var n=a(3197),c=a(725),o=a(5897),d=a(6620),p=a(8387),u=a(4921);function x(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(""),[c,o]=(0,s.useState)("all"),[d,p]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),{cartItems:g,addToCartItems:v,removeFromCartItems:y,isInCart:b,refreshCartCount:j}=(0,u.j)();(0,s.useEffect)(()=>{f()},[c,a]);let f=async()=>{try{p(!0);let e=new URLSearchParams;"all"!==c&&e.append("category",c),a&&e.append("search",a);let r=await fetch(`/api/product?${e.toString()}`),s=await r.json();s.success&&t(s.data)}catch(e){console.error("Failed to fetch products:",e)}finally{p(!1)}},w=async e=>{let t=b(e);try{if(h(e),t){let t=await fetch(`/api/cart?productId=${e}`,{method:"DELETE"}),a=await t.json();a.success?(y(e),alert("Product removed from cart")):alert(a.error||"Failed to remove from cart")}else{let t=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:1})}),a=await t.json();a.success?(v(e),alert("Product added to cart successfully!")):alert(a.error||"Failed to add to cart")}await j()}catch(e){console.error("Cart operation error:",e),alert("Failed to update cart")}finally{h(null)}};return d?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"text-lg",children:"Loading marketplace..."})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Marketplace"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Discover and hire professional photographers for your projects"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"md:col-span-2",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search products or sellers...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:a,onChange:e=>n(e.target.value)})]})}),r.jsx("div",{children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("select",{className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",value:c,onChange:e=>o(e.target.value),children:[{value:"all",label:"All Categories"},{value:"wedding",label:"Wedding"},{value:"portrait",label:"Portrait"},{value:"event",label:"Event"},{value:"product",label:"Product"},{value:"real-estate",label:"Real Estate"},{value:"fashion",label:"Fashion"},{value:"commercial",label:"Commercial"}].map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e?.map(e=>r.jsx(m,{product:e,onToggleCart:w,isProcessing:x===e._id,isInCart:b(e._id)},e._id))}),e?.length===0&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500 text-lg",children:"No products found matching your criteria"})})]})}function m({product:e,onToggleCart:t,isProcessing:a,isInCart:s}){let l=e.images&&e.images.length>0?e.images[0].url:"/placeholder-image.jpg";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow overflow-hidden",children:[(0,r.jsxs)("div",{className:"h-48 bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center overflow-hidden relative",children:["/placeholder-image.jpg"!==l?r.jsx("img",{src:l,alt:e.title,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-6xl",children:"\uD83D\uDCF8"}),s&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[r.jsx(n.Z,{size:14}),r.jsx("span",{children:"In Cart"})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["by ",e.seller.name]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(c.Z,{className:"text-yellow-400 fill-current",size:16}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.rating.toFixed(1)}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.reviewCount,")"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500",children:[r.jsx(o.Z,{size:14}),r.jsx("span",{className:"text-xs",children:e.location})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(d.Z,{className:"text-green-600",size:20}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:e.price})]}),r.jsx("button",{onClick:()=>t(e._id),disabled:a,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 ${s?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{size:18}),r.jsx("span",{children:a?"Removing...":"Remove"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(p.Z,{size:18}),r.jsx("span",{children:a?"Adding...":"Add"})]})})]})]})]})}},3197:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5691).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6620:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5691).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},3045:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5691).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},725:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5691).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},5925:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>i});let r=(0,a(599).createProxy)(String.raw`/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/buyer/marketplace/page.tsx`),{__esModule:s,$$typeof:l}=r,i=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[359,310,623],()=>a(8857));module.exports=r})();