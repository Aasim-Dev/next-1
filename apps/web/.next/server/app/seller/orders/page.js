(()=>{var e={};e.id=249,e.ids=[249],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o});var r=t(9441),l=t(1498),a=t(6580),i=t.n(a),n=t(5511),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let o=["",{children:["seller",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5789)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/seller/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,50)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/seller/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9656)),"/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,3250,23)),"next/dist/client/components/not-found-error"]}],d=["/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/seller/orders/page.tsx"],x="/seller/orders/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/seller/orders/page",pathname:"/seller/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9859:(e,s,t)=>{Promise.resolve().then(t.bind(t,9977))},8230:(e,s,t)=>{Promise.resolve().then(t.bind(t,7085))},9977:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(7685),l=t(3810),a=t(5817),i=t(3161),n=t(7251),c=t(8100),o=t(2722);let d=(0,t(5691).Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var x=t(8610),p=t(2696),m=t(4654),h=t(2015);function u({children:e}){let[s,t]=(0,l.useState)(null),[u,g]=(0,l.useState)(!0),[f,b]=(0,l.useState)(!1),j=(0,a.useRouter)();(0,l.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let s=await e.json();if("seller"!==s.data.user.role){j.push("/");return}t(s.data.user)}else j.push("/login")}catch(e){console.error("Failed to fetch user:",e),j.push("/login")}finally{g(!1)}},v=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),j.push("/login")}catch(e){console.error("Logout failed:",e)}};if(u)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"text-lg",children:"Loading..."})});if(!s)return null;let N=[{href:"/seller/dashboard",icon:n.Z,label:"Dashboard"},{href:"/seller/products",icon:c.Z,label:"My Products"},{href:"/seller/orders",icon:o.Z,label:"Orders"},{href:"/seller/add-product",icon:d,label:"Add Product"}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>b(!f),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 mr-2",children:r.jsx(x.Z,{size:24})}),r.jsx(i.default,{href:"/seller/dashboard",className:"text-2xl font-bold text-purple-600",children:"\uD83D\uDCF8 PhotoHire Seller"})]}),r.jsx("div",{className:"hidden lg:flex items-center space-x-6",children:N.map(e=>(0,r.jsxs)(i.default,{href:e.href,className:"flex items-center space-x-2 text-gray-700 hover:text-purple-600 transition-colors",children:[r.jsx(e.icon,{size:20}),r.jsx("span",{className:"font-medium",children:e.label})]},e.href))}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"hidden md:block text-right",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Seller Account"})]}),r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 font-semibold",children:s.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("button",{onClick:v,className:"hidden lg:flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(p.Z,{size:18}),r.jsx("span",{children:"Logout"})]})]})]})})}),f&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>b(!1)}),r.jsx("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg lg:hidden",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"p-6 border-b flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Menu"}),r.jsx("button",{onClick:()=>b(!1),children:r.jsx(m.Z,{size:24})})]}),r.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:r.jsx("ul",{className:"space-y-2",children:N.map(e=>r.jsx("li",{children:(0,r.jsxs)(i.default,{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>b(!1),children:[r.jsx(e.icon,{size:20}),r.jsx("span",{children:e.label})]})},e.href))})}),(0,r.jsxs)("div",{className:"p-4 border-t",children:[(0,r.jsxs)(i.default,{href:"/seller/settings",className:"flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors mb-2",children:[r.jsx(h.Z,{size:20}),r.jsx("span",{children:"Settings"})]}),(0,r.jsxs)("button",{onClick:v,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[r.jsx(p.Z,{size:20}),r.jsx("span",{children:"Logout"})]})]})]})})]}),r.jsx("main",{className:"pt-20 min-h-screen",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})})]})}},7085:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(7685),l=t(3810),a=t(2295),i=t(1087),n=t(2267),c=t(2457),o=t(9989),d=t(3197),x=t(4654),p=t(3161);function m(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)("all"),[o,d]=(0,l.useState)(!0);(0,l.useEffect)(()=>{x()},[t]);let x=async()=>{try{d(!0);let e="all"!==t?`?status=${t}`:"",r=await fetch(`/api/orders/seller${e}`),l=await r.json();l.success&&s(l.data)}catch(e){console.error("Failed to fetch orders:",e)}finally{d(!1)}},p=async(e,s)=>{try{let t=await fetch(`/api/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})}),r=await t.json();r.success?(x(),alert(`Order ${s} successfully`)):alert(r.error||"Failed to update order")}catch(e){console.error("Failed to update order:",e),alert("Failed to update order")}},m=e=>{p(e,"confirmed")},g=e=>{confirm("Are you sure you want to reject this order?")&&p(e,"cancelled")},f=e=>{confirm("Mark this order as completed?")&&p(e,"completed")},b="all"===t?e:e.filter(e=>e.status===t),j={all:e.length,pending:e.filter(e=>"pending"===e.status).length,confirmed:e.filter(e=>"confirmed"===e.status).length,"in-progress":e.filter(e=>"in-progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length};return o?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"text-lg",children:"Loading orders..."})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Track and manage orders from your customers"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Total Orders"}),r.jsx(a.Z,{className:"text-purple-600",size:24})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j.all})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Pending"}),r.jsx(i.Z,{className:"text-yellow-600",size:24})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j.pending})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"In Progress"}),r.jsx(a.Z,{className:"text-blue-600",size:24})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j.confirmed+j["in-progress"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Completed"}),r.jsx(n.Z,{className:"text-green-600",size:24})]}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:j.completed})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap border-b",children:[r.jsx(h,{label:"All Orders",count:j.all,isActive:"all"===t,onClick:()=>c("all")}),r.jsx(h,{label:"Pending",count:j.pending,isActive:"pending"===t,onClick:()=>c("pending")}),r.jsx(h,{label:"Confirmed",count:j.confirmed,isActive:"confirmed"===t,onClick:()=>c("confirmed")}),r.jsx(h,{label:"In Progress",count:j["in-progress"],isActive:"in-progress"===t,onClick:()=>c("in-progress")}),r.jsx(h,{label:"Completed",count:j.completed,isActive:"completed"===t,onClick:()=>c("completed")})]})}),r.jsx("div",{className:"space-y-4",children:b.map(e=>r.jsx(u,{order:e,onAccept:m,onReject:g,onComplete:f},e._id))}),0===b.length&&(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[r.jsx(a.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No orders found"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"all"===t?"You haven't received any orders yet":`No ${t} orders`})]})]})}function h({label:e,count:s,isActive:t,onClick:l}){return(0,r.jsxs)("button",{onClick:l,className:`px-6 py-4 font-medium transition-colors hover:text-purple-600 ${t?"border-b-2 border-purple-600 text-purple-600":"text-gray-600"}`,children:[e," (",s,")"]})}function u({order:e,onAccept:s,onReject:t,onComplete:l}){let m={pending:{icon:r.jsx(i.Z,{className:"text-yellow-600",size:20}),bgColor:"bg-yellow-50",textColor:"text-yellow-800",borderColor:"border-yellow-200",label:"Pending"},confirmed:{icon:r.jsx(n.Z,{className:"text-blue-600",size:20}),bgColor:"bg-blue-50",textColor:"text-blue-800",borderColor:"border-blue-200",label:"Confirmed"},"in-progress":{icon:r.jsx(a.Z,{className:"text-purple-600",size:20}),bgColor:"bg-purple-50",textColor:"text-purple-800",borderColor:"border-purple-200",label:"In Progress"},completed:{icon:r.jsx(n.Z,{className:"text-green-600",size:20}),bgColor:"bg-green-50",textColor:"text-green-800",borderColor:"border-green-200",label:"Completed"},cancelled:{icon:r.jsx(c.Z,{className:"text-red-600",size:20}),bgColor:"bg-red-50",textColor:"text-red-800",borderColor:"border-red-200",label:"Cancelled"}}[e.status],h=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:["Order #",e.orderId]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Customer: ",e.buyer.name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Placed on ",h]})]}),(0,r.jsxs)("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg ${m.bgColor} border ${m.borderColor}`,children:[m.icon,r.jsx("span",{className:`font-medium ${m.textColor}`,children:m.label})]})]}),r.jsx("div",{className:"mb-4 space-y-3",children:e.items.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 pb-3 border-b last:border-0",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-2xl",children:e.product.images&&e.product.images.length>0?e.product.images[0].url:"\uD83D\uDCF8"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:e.product.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 capitalize",children:[e.product.category," â€¢ Qty: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold text-gray-900",children:["$",e.subtotal.toFixed(2)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["$",e.price.toFixed(2)," each"]})]})]},s))}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",e.totalAmount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(p.default,{href:`/seller/orders/${e._id}`,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[r.jsx(o.Z,{size:18}),r.jsx("span",{children:"View Details"})]}),"pending"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>s(e._id),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(d.Z,{size:18}),r.jsx("span",{children:"Accept"})]}),(0,r.jsxs)("button",{onClick:()=>t(e._id),className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[r.jsx(x.Z,{size:18}),r.jsx("span",{children:"Reject"})]})]}),("confirmed"===e.status||"in-progress"===e.status)&&(0,r.jsxs)("button",{onClick:()=>l(e._id),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[r.jsx(n.Z,{size:18}),r.jsx("span",{children:"Mark Completed"})]})]})]})]})}},8100:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},3197:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2267:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2457:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1087:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},9989:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7251:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},2295:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},2015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2722:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5691).Z)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},50:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>a,__esModule:()=>l,default:()=>i});let r=(0,t(599).createProxy)(String.raw`/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/seller/layout.tsx`),{__esModule:l,$$typeof:a}=r,i=r.default},5789:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>a,__esModule:()=>l,default:()=>i});let r=(0,t(599).createProxy)(String.raw`/var/www/html/pro-1/photographer-marketplace-v2/apps/web/src/app/seller/orders/page.tsx`),{__esModule:l,$$typeof:a}=r,i=r.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[359,310],()=>t(1827));module.exports=r})();